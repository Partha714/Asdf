<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Happy Birthday Srishti!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
      body {
        margin: 0;
        background-color: black;
        overflow: hidden;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="absolute top-4 w-full text-center z-10 pointer-events-none">
      <h1 class="text-white text-[6vw] sm:text-[4vw] font-bold drop-shadow-[0_0_8px_#ffffff]">
        ðŸŽ‰ Happy Birthday, Srishti! ðŸŽ‰
      </h1>
    </div>

    <script>
      let font;
      let particles = [];
      let lines = ["Happy Birthday", "Srishti!"];
      let fontSize;

      function preload() {
        font = loadFont("https://cdnjs.cloudflare.com/ajax/libs/topcoat/0.8.0/font/SourceCodePro-Bold.otf");
      }

      function setup() {
        createCanvas(windowWidth, windowHeight);
        fontSize = windowWidth < 500 ? 50 : 80;
        createParticles();
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
        fontSize = windowWidth < 500 ? 50 : 80;
        createParticles();
      }

      function createParticles() {
        particles = [];
        let spacing = fontSize + 30;
        let allPoints = [];

        for (let i = 0; i < lines.length; i++) {
          let line = lines[i];
          let textWidthEstimate = font.textBounds(line, 0, 0, fontSize).w;
          let x = (width - textWidthEstimate) / 2;
          let y = height / 2 - spacing / 2 + i * spacing;

          let points = font.textToPoints(line, x, y, fontSize, {
            sampleFactor: 0.2,
          });

          allPoints.push(...points);
        }

        for (let pt of allPoints) {
          particles.push(new Particle(random(width), random(height), pt.x, pt.y));
        }
      }

      class Particle {
        constructor(x, y, tx, ty) {
          this.pos = createVector(x, y);
          this.target = createVector(tx, ty);
          this.vel = p5.Vector.random2D().mult(random(5));
          this.acc = createVector();
          this.r = 2.8;
          this.alpha = 255;
        }

        update() {
          let force = p5.Vector.sub(this.target, this.pos);
          force.mult(0.07);
          this.acc.add(force);
          this.vel.add(this.acc);
          this.vel.limit(5);
          this.pos.add(this.vel);
          this.acc.mult(0);
        }

        show() {
          noStroke();
          fill(255, this.alpha);
          ellipse(this.pos.x, this.pos.y, this.r);
        }
      }

      function draw() {
        background(0, 30);
        for (let p of particles) {
          p.update();
          p.show();
        }

        drawStars(80); // optional sparkle background
      }

      function drawStars(count) {
        for (let i = 0; i < count; i++) {
          fill(255, random(80, 180));
          noStroke();
          ellipse(random(width), random(height), random(0.5, 1.5));
        }
      }
    </script>
  </body>
</html>
