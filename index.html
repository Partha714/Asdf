<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Happy Birthday</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
        height: 100%;
      }
      canvas {
        display: block;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body class="relative touch-none">
    <!-- Top Message -->
    <div class="absolute top-3 w-full text-center z-10 pointer-events-none">
      <h1 class="text-pink-400 text-4xl md:text-5xl font-bold drop-shadow-[0_0_10px_#ff69b4]">
        ðŸŽ‰ Happy Birthday, Srishti! ðŸŽ‰
      </h1>
    </div>

    <!-- Canvas -->
    <canvas id="canvas" class="w-full h-full"></canvas>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      let W, H;
      const dots = [], sparkles = [];
      const messages = ["Happy Birthday,", "Srishti!"]; // Split into two lines

      function resizeCanvas() {
        W = window.innerWidth;
        H = window.innerHeight;
        canvas.width = W;
        canvas.height = H;
      }

      function createTextPoints() {
        ctx.clearRect(0, 0, W, H);

        const fontSize = Math.min(W * 0.08, H * 0.12, 60); // Slightly smaller font
        ctx.font = `bold ${fontSize}px sans-serif`;
        ctx.textAlign = "center";
        ctx.fillStyle = "white";
        ctx.textBaseline = "middle";

        const lines = messages;
        const spacing = fontSize + 15; // Increased spacing between lines
        const points = [];
        const gap = W < 500 ? 4 : 3; // Smaller gap for better text formation

        lines.forEach((line, i) => {
          // Make second line bolder
          if (i === 1) {
            ctx.font = `bold ${fontSize * 1.2}px sans-serif`; // Bigger and bolder for "Srishti!"
          }
          
          const yPos = H / 2 - (spacing / 2) + i * spacing;
          ctx.fillText(line, W / 2, yPos);
          const imageData = ctx.getImageData(0, 0, W, H).data;

          for (let y = 0; y < H; y += gap) {
            for (let x = 0; x < W; x += gap) {
              const index = (y * W + x) * 4;
              if (imageData[index + 3] > 128) {
                points.push({ x, y });
              }
            }
          }

          ctx.clearRect(0, 0, W, H); // clear between lines
          ctx.font = `bold ${fontSize}px sans-serif`; // Reset font
        });

        return points;
      }

      function initDots(points) {
        dots.length = 0;
        for (let p of points) {
          dots.push({
            x: Math.random() * W,
            y: Math.random() * H,
            tx: p.x,
            ty: p.y,
            color: `hsl(${Math.random() * 360}, 100%, 70%)`,
          });
        }
      }

      function initSparkles(count = 80) {
        sparkles.length = 0;
        for (let i = 0; i < count; i++) {
          sparkles.push({
            x: Math.random() * W,
            y: Math.random() * H,
            r: Math.random() * 1.5 + 0.5,
            a: Math.random(),
            dx: (Math.random() - 0.5) * 0.3,
            dy: (Math.random() - 0.5) * 0.3,
          });
        }
      }

      function drawSparkles() {
        for (let s of sparkles) {
          s.x += s.dx;
          s.y += s.dy;
          s.a += (Math.random() - 0.5) * 0.05;
          s.a = Math.max(0.1, Math.min(1, s.a));
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255,255,255,${s.a})`;
          ctx.shadowBlur = 5;
          ctx.shadowColor = "#ffffff";
          ctx.fill();
          ctx.shadowBlur = 0;
        }
      }

      function animate() {
        ctx.clearRect(0, 0, W, H);
        drawSparkles();

        for (let dot of dots) {
          dot.x += (dot.tx - dot.x) * 0.08;
          dot.y += (dot.ty - dot.y) * 0.08;

          ctx.beginPath();
          ctx.arc(dot.x, dot.y, 2, 0, Math.PI * 2);
          ctx.fillStyle = dot.color;
          ctx.shadowBlur = 12;
          ctx.shadowColor = dot.color;
          ctx.fill();
          ctx.shadowBlur = 0;
        }

        requestAnimationFrame(animate);
      }

      function start() {
        resizeCanvas();
        const points = createTextPoints();
        initDots(points);
        initSparkles();
        animate();
      }

      // Throttle resize events
      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(start, 200);
      });
      
      window.addEventListener('load', start);
    </script>
  </body>
</html>
